# Render Blueprint para SIGC Backend + Frontend
# Para importar: Dashboard → New → Blueprint → selecciona este repo
# Render creará automáticamente: 1 servicio backend, 1 frontend, 1 base de datos Postgres

databases:
  - name: sigc-postgres
    databaseName: sigc_db
    user: sigc_user
    plan: starter

services:
  - type: web
    name: sigc-backend-api
    env: docker
    dockerfilePath: Dockerfile
    plan: starter
    autoDeploy: true
    healthCheckPath: /actuator/health
    disk:
      name: sigc-uploads
      mountPath: /srv/uploads
      sizeGB: 1
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: prod
      - key: SPRING_DATASOURCE_URL
        fromDatabase:
          name: sigc-postgres
          property: connectionString
      - key: JWT_SECRET
        generateValue: true
      - key: APP_UPLOAD_DIR
        value: /srv/uploads/

  - type: web
    name: sigc-frontend
    env: docker
    dockerfilePath: sigc-frontend/Dockerfile
    plan: starter
    autoDeploy: true
    envVars:
      - key: VITE_API_URL
        fromService:
          type: web
          name: sigc-backend-api
          property: host
